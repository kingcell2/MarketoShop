$((function(){const t=JSON.parse(localStorage.getItem("cart"));e(t);const n=t.reduce((t,n)=>t+n.total,0),a=t.reduce((t,n)=>t+n.quantity_add,0);function e(t){t.map(t=>{$(`\n            <div data-id=${t.id} class="item">\n                        <button id="delete-cart">X</button>\n                        <img src=${t.img}\n                            alt="">\n                        <div class="name">${t.name}</div>\n                        <div class="price">\n                            <span class="price-discount">\n                               $${Math.round(t.price-t.price*t.discount/100)}.00</span>\n                        </div>\n                        <form class="flex a-center" action="#">\n                            <div class="btn flex a-center">\n                                <div class="dec-button">-</div>\n                                <input type="tel" class="quantity_" id="quantity" value=${t.quantity_add}>\n                                <div class="inc-button">+</div>\n                            </div>\n                        </form>\n                        <div class="subtotal">$${Math.round(t.price-t.price*t.discount/100)*t.quantity_add}.00\n                        </div>\n                        <button class="update" >Update Cart</button>\n                    </div>\n                    <div class="b-bottom"></div>\n                    \n            `).appendTo(".cols")})}function c(t){t.map(t=>{$(`\n                <div data-id=${t.id} class="product flex a-center j-between">\n                <div  class="item-product flex a-center j-between">\n                    <img src=${t.img}\n                        alt="">\n                    <div class="info">\n                        <a class="name" href="/viewproduct.html">${t.name}</a>\n                        <div class="price flex a-center">\n                        <span class="quantity">${t.quantity_add} xÂ </span>\n                        <span class="price"> $${Math.round(t.price-t.price*t.discount/100)}.00</span>\n                        </div>\n                    </div>\n                </div>\n                <button id="delete">X</button>     \n                </div>\n            `).appendTo(".product-cart")})}$(".blue").text(""+a),t.length>0&&$(".no-product").css("display","none"),$(".total").text(`$${n}.00`),$(".product-cart").empty(),c(t),$("body").on("click","#delete-cart",(function(){const n=$(this).parents(".item").data("id"),a=t.findIndex(t=>t.id===n);t.splice(a,1);const s=t.reduce((t,n)=>t+n.total,0);t.subtotal=s;const d=t.reduce((t,n)=>t+n.quantity_add,0);$(".blue").text(""+d),$(".product-cart").empty(),t.length?($(".view-cart").css("opacity","1"),$(".total").text(`$${s}.00`),c(t)):($(".cols").css("display","none"),$(".return").css("display","block"),$(".shop").css("display","flex"),$(".no-product").css("display","block"),$(".row.a").css("display","none"),$(".code").css("display","none"),$(".total").text(`$${s}.00`)),$(".cols").empty(),e(t)})),$("body").on("click",".update",(function(){const n=$(this).parents(".item").data("id"),a=t.find(t=>t.id===n);let s=$(".quantity_").val();if(a.quantity_add=parseInt(s),a.total=Math.round(a.quantity_add*(a.price-a.price*a.discount/100)),a.quantity_add>a.quantity){alert("Not enough products on stock , Existsing quantity on stock is "+a.quantity+" Please check back again!"),a.quantity_add=a.quantity,a.total=Math.round(a.quantity_add*(a.price-a.price*a.discount/100)),$(".cols").empty(),e(t),$(".product-cart").empty(),c(t);const n=t.reduce((t,n)=>t+n.total,0),s=t.reduce((t,n)=>t+n.quantity_add,0);return $(".blue").text(""+s),$(".total").text(`$${n}.00`),0}const d=t.reduce((t,n)=>t+n.quantity_add,0);$(".blue").text(""+d);const i=t.reduce((t,n)=>t+n.total,0);t.length>0&&$(".no-product").css("display","none"),$(".total").text(`$${i}.00`),$(".product-cart").empty(),c(t),$(".cols").empty(),e(t),localStorage.setItem("cart",JSON.stringify(t))})),$("body").on("click","#delete",(function(){const n=$(this).parents(".product").data("id"),a=t.findIndex(t=>t.id===n);t.splice(a,1);const s=t.reduce((t,n)=>t+n.total,0);t.subtotal=s;const d=t.reduce((t,n)=>t+n.quantity_add,0);$(".blue").text(""+d),$(".product-cart").empty(),t.length?($(".no-product").css("display","none"),$(".view-cart").css("opacity","1"),$(".total").text(`$${s}.00`),c(t)):($(".cols").css("display","none"),$(".return").css("display","block"),$(".shop").css("display","flex"),$(".no-product").css("display","block"),$(".row.a").css("display","none"),$(".code").css("display","none"),$(".total").text(`$${s}.00`)),$(".cols").empty(),e(t)}))}));